<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMDb Asset Types Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f5f5f5;
            color: #333;
        }

        main {
            text-align: center;
            max-width: 800px;
            margin: auto;
        }

        .asset-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 2em;
            border: 1px solid #ddd;
            padding: 1em;
            border-radius: 8px;
            background: #fff;
            width: 100%;
        }

        .asset-container img {
            width: 300px;
            height: auto;
            border-radius: 8px;
            margin: 1em 0;
        }

        .asset-label {
            font-weight: bold;
            margin-top: 1em;
        }
    </style>
</head>
<body>
    <main>
        <header>
            <h1>TMDb Asset Types Test</h1>
            <p>Fetching and displaying assets for "CLOSE YOUR EYES"</p>
        </header>
        <div id="assets">
            <p>Loading assets...</p>
        </div>
    </main>
    <script>
        const apiKey = "8e1d26d7e8dc3e7cb95d4c26d5ae4234";
        const apiToken = "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4ZTFkMjZkN2U4ZGMzZTdjYjk1ZDRjMjZkNWFlNDIzNCIsIm5iZiI6MTczNTg2NDA5My43MTEsInN1YiI6IjY3NzcyZjFkNmQ3Y2EwMGU3ODcyNDUzYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.q2UOQH5Fo-UDKTNJvgz7cqUXwZ3oz2aLJfmKU_pFqzE";

        async function fetchMovieAssets(movieTitle) {
            try {
                // Search for the movie
                const searchResponse = await fetch(`https://api.themoviedb.org/3/search/movie?query=${encodeURIComponent(movieTitle)}&api_key=${apiKey}`, {
                    headers: { Authorization: `Bearer ${apiToken}` }
                });
                const searchData = await searchResponse.json();
                const movieId = searchData.results[0]?.id;

                if (!movieId) {
                    throw new Error("Movie not found");
                }

                // Fetch movie images
                const imagesResponse = await fetch(`https://api.themoviedb.org/3/movie/${movieId}/images?api_key=${apiKey}`, {
                    headers: { Authorization: `Bearer ${apiToken}` }
                });
                const imagesData = await imagesResponse.json();

                return {
                    poster: `https://image.tmdb.org/t/p/w500${imagesData.posters[0]?.file_path || ''}`,
                    backdrop: `https://image.tmdb.org/t/p/w780${imagesData.backdrops[0]?.file_path || ''}`,
                    logo: `https://image.tmdb.org/t/p/original${imagesData.logos[0]?.file_path || ''}`,
                };
            } catch (error) {
                console.error("Error fetching assets:", error);
                return null;
            }
        }

        async function displayMovieAssets() {
            const assetContainer = document.getElementById("assets");
            assetContainer.innerHTML = "";

            const movieTitle = "CLOSE YOUR EYES";
            const assets = await fetchMovieAssets(movieTitle);

            if (!assets) {
                assetContainer.innerHTML = "<p>Unable to load assets.</p>";
                return;
            }

            // Display assets
            const { poster, backdrop, logo } = assets;

            const createAssetElement = (label, imageUrl) => {
                if (!imageUrl) return `<p>${label}: Not Available</p>`;
                return `
                    <div class="asset-container">
                        <span class="asset-label">${label}</span>
                        <img src="${imageUrl}" alt="${label}" />
                    </div>
                `;
            };

            assetContainer.innerHTML = `
                ${createAssetElement("Poster", poster)}
                ${createAssetElement("Backdrop", backdrop)}
                ${createAssetElement("Logo", logo)}
            `;
        }

        // Load assets on page load
        displayMovieAssets();
    </script>
</body>
</html>